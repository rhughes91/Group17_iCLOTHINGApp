@model IEnumerable<Group17_iCLOTHINGApp.Models.ShoppingCart>

@{ ViewBag.Title = "Index"; }

<h2>Your Shopping Cart</h2>

<p>
	@Html.ActionLink("Create New", "Create")
</p>
<table class="table">
	<thead>
		<tr>
			<th>Product Name</th>
			<th>Price</th>
			<th>Quantity</th>
			<th>Item Sub-total</th>

		</tr>
	</thead>
	<tbody>
		@foreach (var item in Model)
		{
<tr>
	<td>@Html.DisplayFor(modelItem => item.Product.productName)</td>
	<td>$@Html.DisplayFor(modelItem => item.productPrice)</td>
	<td>@Html.DisplayFor(modelItem => item.productQuantity)</td>
	<td>$@(item.productQuantity * item.productPrice)</td>
	<td>
		@Html.ActionLink("Edit", "Edit", new { id = item.cartID }, new { @class = "btn btn-primary btn-sm" })
		@Html.ActionLink("Details", "Details", new { id = item.cartID }, new { @class = "btn btn-info btn-sm" })
		@Html.ActionLink("Delete", "Delete", new { id = item.cartID }, new { @class = "btn btn-danger btn-sm" })
	</td>
</tr>}

		<tr>
			<td colspan="5" class="text-right">
				<br><br>

				<strong>Transaction Sub-total:</strong>
				$@Math.Round(Model.Sum(item => item.productPrice * item.productQuantity), 2)

				<br>
				<strong>Sales Tax:</strong>
				$@Math.Round(Model.Sum(item => 0.03 * item.productPrice * item.productQuantity), 2)

				<br>

				<strong>Transaction Total:</strong>
				$@Model.Sum(item => Math.Round(item.productPrice * item.productQuantity * 0.03, 2) + Math.Round(item.productPrice * item.productQuantity, 2))

				<br><br>

				@Html.ActionLink("Check Out", "Checkout", "ShoppingCarts", new { @class = "btn btn-primary btn-sm" })
			</td>
		</tr>
	</tbody>
</table>

</table>
